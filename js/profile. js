const sb = window.supabaseClient;

async function loadProfile() {
  const { data: user } = await sb.auth.getUser();
  if (!user.user) location.href = "index.html";

  const { data } = await sb
    .from("profiles")
    .select("*")
    .eq("id", user.user.id)
    .single();

  document.getElementById("profile").innerHTML = `
    <p>الدور: ${data.role}</p>
  `;
}
loadProfile();

async function logout() {
  await sb.auth.signOut();
  location.href = "index.html";
}
